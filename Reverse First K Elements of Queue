from collections import deque

def reverseK(q, k):
    if k > len(q):
        return q
    stack = []
    for _ in range(k):
        stack.append(q.popleft())
    while stack:
        q.append(stack.pop())
    for _ in range(len(q) - k):
        q.append(q.popleft())
    return q

q = deque([1, 2, 3, 4, 5])
k = 3
print(list(reverseK(q, k))) # [3, 2, 1, 4, 5]
